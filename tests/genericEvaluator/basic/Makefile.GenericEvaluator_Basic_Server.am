# @file Makefile.GenericEvaluator_Basic_Server.am
#
# $Id: automake.mpd 1138 2007-02-02 17:51:14Z elliott_c $

if BUILD_CORBA_MESSAGING
if BUILD_EXCEPTIONS

BUILT_SOURCES += \
  testC.cpp \
  testC.h \
  testC.inl \
  testS.cpp \
  testS.h \
  testS.inl

CLEANFILES += \
  test-stamp \
  testC.cpp \
  testC.h \
  testC.inl \
  testS.cpp \
  testS.h \
  testS.inl

testC.cpp testC.h testC.inl testS.cpp testS.h testS.inl: test-stamp

test-stamp: $(srcdir)/test.idl $(TAO_IDL_DEP)
	$(TAO_IDL) $(TAO_IDLFLAGS) $(srcdir)/test.idl
	@touch "$@"

noinst_PROGRAMS += server

server_CPPFLAGS = \
  -I$(ACE_ROOT) \
  -I$(ACE_BUILDDIR) \
  -I$(TAO_ROOT) \
  -I$(TAO_BUILDDIR)

server_SOURCES = \
  server.cpp \
  testC.cpp \
  testS.cpp \
  test_i.cpp \
  testC.h \
  testC.inl \
  testS.h \
  testS.inl \
  test_i.h

server_LDADD = \
  liblorica_Client.la \
  libTAO_DynamicInterface.la \
  libTAO_Messaging.la \
  libTAO_PI.la \
  libTAO_CodecFactory.la \
  libTAO_PortableServer.la \
  libTAO_Valuetype.la \
  libTAO_AnyTypeCode.la \
  libTAO.la \
  libACE.la

endif BUILD_EXCEPTIONS
endif BUILD_CORBA_MESSAGING
